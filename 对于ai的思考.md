# åŸºäºcallbackã€thenå’Œawaitçš„ä¸€äº›æ€è€ƒ

æ€è€ƒ

- æœ‰äº†aiï¼Œä¸å†éœ€è¦å»è®°å¾ˆå¤šçš„ä»£ç ç‰‡æ®µã€‚ä»¥å‰çœ‹è¿‡ä¸€ä¸ªè¯´æ³•ï¼Œä¸€ä¸ªç»éªŒä¸°å¯Œçš„ç¨‹åºå‘˜ï¼Œåº”è¯¥æœ‰å¾ˆå¤šå¯ç”¨çš„ä»£ç ç‰‡æ®µã€‚ä»¥å‰åœ¨ç™¾åº¦çš„æ—¶å€™ï¼Œç»å¸¸çœ‹è§ä¸€å¥è¯ï¼šè¯»ç åƒä¸‡è¡Œè¡Œï¼Œä¸‹ç¬”å¦‚æœ‰ç¥ï¼è¿™ä¸¤ç‚¹éƒ½åœ¨å¼ºè°ƒä»£ç é‡çš„é‡è¦æ€§ã€‚
- ä½†æ˜¯ä»€ä¹ˆæ˜¯ç¨‹åºå‘˜çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Ÿæˆ‘è§‰å¾—æ˜¯åŸºäºé—®é¢˜ç”Ÿæˆè§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚å‡è®¾ä¸€ä¸ªé—®é¢˜çš„è§£å†³å¯ä»¥åˆ†è§£ä¸º10ä¸ªå°é—®é¢˜ï¼Œé‚£ä¹ˆä»£ç ç‰‡æ®µå°±æ˜¯è§£å†³è¿™äº›å°é—®é¢˜çš„æ–¹æ¡ˆæˆ–è€…éƒ¨åˆ†æ–¹æ¡ˆã€‚
- ä»¥å‰é›·å†›ä¹Ÿä¿ç•™äº†å¾ˆå¤šå†™è¿‡çš„ä»£ç ã€‚
- åœ¨aiå‡ºç°åï¼Œ`è¯»ç åƒä¸‡è¡Œï¼Œä¸‹ç¬”å¦‚æœ‰ç¥`çš„é€»è¾‘å°±å°±ä¼šå›é€€åˆ° `åŸºäºé—®é¢˜ç”Ÿæˆè§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›`ã€‚åªè¦å°†å¤§é—®é¢˜åˆ†è§£æˆä¸€ä¸ªä¸ªå°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹è¿™ä¸ªå°é—®é¢˜ç»™å‡ºè¯¦ç»†çš„æè¿°ï¼Œè®©aiç»™å‡ºå¯¹åº”çš„ä»£ç ç‰‡æ®µï¼è¿™æ˜¯è§£å†³é—®é¢˜çš„å…ƒèƒ½åŠ›ï¼Œè€Œä¸æ˜¯å»ç§¯ç´¯å¾ˆå¤šçš„ä»£ç ç‰‡æ®µã€‚
- è¿™å¯¹å­¦ä¹ æå‡ºäº†ä¸€ä¸ªæ›´é«˜çš„è¦æ±‚ï¼šå­¦ä¹ çŸ¥è¯†æœ¬è´¨ï¼Œè€Œä¸æ˜¯å„ç§å‡½æ•°çš„è°ƒç”¨ã€‚æ‹¿jsçš„å¼‚æ­¥å‡½æ•°ä¸¾ä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€å¼€å§‹æ˜¯æœ‰callbackï¼Œåæ¥å¼•å…¥äº†promiseï¼ŒåŸºäºpromiseåˆæœ‰äº†awaitã€‚ä½ ä¸éœ€è¦è®°ä½æ¯ä¸€ç§å†™æ³•ï¼Œæœ‰çš„äººä»¥ä¼šé»˜å†™ä¸ºè£ã€‚åªéœ€è¦äº†è§£æ¯ä¸€ç§è§£å†³æ–¹æ¡ˆçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Œç„¶åé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°å‡ºæ¥ï¼Œè¡¨è¾¾ä½ çš„éœ€æ±‚å°±å¯ä»¥ã€‚
- å‡è®¾æˆ‘ä»¬æœ‰äº†thençš„å†™æ³•ï¼Œä½ æƒ³æ”¹å†™æˆawaitçš„å†™æ³•ï¼Œä¸éœ€è¦è‡ªå·±åŠ¨æ‰‹å»æ”¹å†™ï¼Œåªéœ€è¦å°†ä»£ç ç²˜è´´è¿›chatgptï¼Œ


çœ‹prompt engineeringæœ‰æ„Ÿï¼š
1.çœ‹äº†å´æ©è¾¾çš„æç¤ºè¯å·¥ç¨‹çš„è¯¾ç¨‹ï¼Œé‡Œé¢ç»™å‡ºäº†ä½¿ç”¨chatgptçš„ä¸¤æ¡æŒ‡å¯¼åŸåˆ™ï¼š
oneï¼šwrite clear and specific instructions

two:  give the model time to â€œthinkâ€

ç¬¬ä¸€æ¡å¼ºè°ƒçš„æ˜¯é’ˆå¯¹ä¸€ä¸ªå…·ä½“é—®é¢˜ï¼Œæˆ‘ä»¬è¦ç»™å‡ºæ¸…æ¥šä¸”è¯¦ç»†çš„æŒ‡ä»¤ï¼›

ç¬¬äºŒæ¡å¼ºè°ƒçš„æ˜¯è¦å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£ï¼ŒæŒ‰æ­¥éª¤ç»™å‡ºå„ä¸ªå°é—®é¢˜çš„ç­”æ¡ˆã€‚

2.æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºä½¿ç”¨chatgptçš„æ ¸å¿ƒåŸåˆ™ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£æˆä¸€ç³»åˆ—ç®€å•é—®é¢˜ï¼Œé€šè¿‡chatgptå»è§£å†³æ¯ä¸€ä¸ªç®€å•é—®é¢˜ã€‚

3.ä¸‹é¢ç»™å‡ºäº†åŸºäºnew bingç”Ÿæˆçš„ä¸‰æ£µæ ‘ğŸŒ²ï¼Œæ ‘æ˜¯å¾ˆæ˜æ˜¾çš„ä¸Šçª„ä¸‹å®½çš„æ­£ä¸‰è§’ç»“æ„ã€‚

å¦‚æœå°†æ ‘çš„åº•éƒ¨çœ‹åšæ˜¯ä¸€ä¸ªé¢†åŸŸçš„åŸºç¡€çŸ¥è¯†ï¼Œæ ‘çš„ä¸­é—´å°±æ˜¯åŸºç¡€çŸ¥è¯†ç»è¿‡æ’åˆ—ç»„åˆè¡ç”Ÿå‡ºçš„é«˜ä¸€çº§åˆ«çš„çŸ¥è¯†ï¼Œæ ‘çš„é¡¶éƒ¨å°±æ˜¯é€šè¿‡åŸºç¡€çŸ¥è¯†å’Œé«˜ä¸€çº§åˆ«çš„çŸ¥è¯†å¯ä»¥è§£å†³çš„é—®é¢˜ã€‚è¿™å°±æ˜¯ä¸­å›½æ•™è‚²çš„å…¸å‹å†™ç…§ï¼šæ‰€æœ‰çš„å­¦ä¹ éƒ½æ˜¯å…ˆæ‰“åŸºç¡€ï¼Œç„¶åè§£å†³é—®é¢˜ã€‚çœ‹ä¸Šå»ç¡®å®æ²¡æ¯›ç—…ï¼Œè¿™ä¹Ÿæ˜¯å®ƒè¢«è¿™æ ·è®¾è®¡å‡ºæ¥çš„åŸå› ã€‚

4.ç„¶è€Œï¼ŒçœŸå®ä¸–ç•Œçš„è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œä¸è®ºæ˜¯åˆ›ä¸šã€åšç ”ç©¶è¿˜æ˜¯å†™ä»£ç ï¼Œéƒ½æ˜¯å…ˆæœ‰é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç»ˆæé—®é¢˜ï¼Œåˆ†è§£æˆå¾ˆå¤šå±‚çº§çš„å°é—®é¢˜ï¼Œå€’é€¼å­¦ä¹ ã€‚è¿™æ˜¯å…¸å‹çš„å€’ä¸‰è§’çš„èƒ½åŠ›ç»“æ„ã€‚

5.æ€»ç»“ä¸€ä¸‹ï¼Œæ±‚å­¦é˜¶æ®µçš„èƒ½åŠ›æ¨¡å‹ï¼šçŸ¥è¯†-->é«˜çº§åˆ«çŸ¥è¯†-->é—®é¢˜ã€‚ç°å®ä¸–ç•Œçš„èƒ½åŠ›æ¨¡å‹ï¼šé—®é¢˜-->å°é—®é¢˜-->çŸ¥è¯†ã€‚

6.åœ¨æœç´¢å¼•æ“æ—¶ä»£ï¼ŒçŸ¥é“å¦‚ä½•æ‰¾åˆ°éœ€è¦çš„çŸ¥è¯†ï¼Œæ¯”è®°ä½æ¯ä¸€ä¸ªçŸ¥è¯†é‡è¦å¾—å¤šã€‚éšç€aiæ—¶ä»£çš„åˆ°æ¥ï¼Œä¸æ–­åœ°æŠŠé‡åˆ°çš„é—®é¢˜åˆ†è§£æˆå°é—®é¢˜ï¼Œé€šè¿‡aiå»è§£å†³ä¸€ä¸ªä¸ªå…·ä½“çš„å°é—®é¢˜ï¼Œè¿™æˆä¸ºäº†aiæ—¶ä»£çš„æ ¸å¿ƒç«äº‰åŠ›ï¼




# callbackã€thenã€await

## callback

```javascript
// ä½¿ç”¨å›è°ƒå‡½æ•°çš„å†™æ³•
accounts.forEach(function(account) { // éå†è´¦æˆ·æ•°ç»„
  web3.eth.getBalance(account, function(error, balance) { // è·å–è´¦æˆ·ä½™é¢ï¼Œä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°
    if (error) { // å¤„ç†é”™è¯¯
      console.error(error); // æ‰“å°é”™è¯¯ä¿¡æ¯
    } else { // å¤„ç†ç»“æœ
      console.log(account + ": " + balance); // æ‰“å°è´¦æˆ·å’Œä½™é¢
    }
  });
});

```

## then

```javascript
// ä½¿ç”¨thençš„è¯­æ³•
function printBalances(accounts) { // å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°
  accounts.forEach(account => { // éå†è´¦æˆ·æ•°ç»„
    web3.eth.getBalance(account) // è·å–è´¦æˆ·ä½™é¢ï¼Œè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡
    .then(balance => { // å¤„ç†Promiseå¯¹è±¡çš„ç»“æœ
      console.log(`${account}: ${balance}`); // ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ‰“å°è´¦æˆ·å’Œä½™é¢
    })
    .catch(error => { // å¤„ç†é”™è¯¯
      console.error(error); // æ‰“å°é”™è¯¯ä¿¡æ¯
    });
  });
}

printBalances(accounts); // è°ƒç”¨æ™®é€šå‡½æ•°

```

## async/await

```javascript
// ä½¿ç”¨async/awaitè¯­æ³•
async function printBalances(accounts) { // å®šä¹‰ä¸€ä¸ªasyncå‡½æ•°
  for (let account of accounts) { // éå†è´¦æˆ·æ•°ç»„
    try {
      let balance = await web3.eth.getBalance(account); // ç­‰å¾…è·å–è´¦æˆ·ä½™é¢
      console.log(`${account}: ${balance}`); // ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ‰“å°è´¦æˆ·å’Œä½™é¢
    } catch (error) { // å¤„ç†é”™è¯¯
      console.error(error); // æ‰“å°é”™è¯¯ä¿¡æ¯
    }
  }
}

printBalances(accounts); // è°ƒç”¨asyncå‡½æ•°

```
